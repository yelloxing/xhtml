
/*!
* xhtml.js - 🦑 常用的html操作集合。Common set of html operations.
* git+https://github.com/yelloxing/xhtml.js.git
*
* author 心叶
*
* version 1.0.1
*
* build Sat Oct 21 2019
*
* Copyright yelloxing
* Released under the MIT license
*
* Date:Sat Oct 19 2019 17:55:57 GMT+0800 (GMT+08:00)
*/

"use strict";function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}(function(){"use strict";var MAX_SAFE_INTEGER=9007199254740991;function isLength(value){return typeof value=="number"&&value>-1&&value%1==0&&value<=MAX_SAFE_INTEGER}function isArrayLike(value){return value!=null&&typeof value!="function"&&isLength(value.length)}var toString=Object.prototype.toString;function getType(value){if(value==null){return value===undefined?"[object Undefined]":"[object Null]"}return toString.call(value)}function isString(value){var type=_typeof(value);return type==="string"||type==="object"&&value!=null&&!Array.isArray(value)&&getType(value)==="[object String]"}function isArraySpec(value){return isArrayLike(value)&&!isString(value)}var concat=function concat(newArray,values){for(var i=0;i<values.length;i++){if(isArraySpec(values[i])){if(values[i].length>1){concat(newArray,values[i])}else if(values[i].length===1){newArray.push(values[i][0])}}else{newArray.push(values[i])}}};function concat$1(){var newArray=[];for(var _len=arguments.length,values=new Array(_len),_key=0;_key<_len;_key++){values[_key]=arguments[_key]}concat(newArray,values);return newArray}function isPlainObject(value){if(value===null||_typeof(value)!=="object"||getType(value)!="[object Object]"){return false}if(Object.getPrototypeOf(value)===null){return true}var proto=value;while(Object.getPrototypeOf(proto)!==null){proto=Object.getPrototypeOf(proto)}return Object.getPrototypeOf(value)===proto}function isElement(value){return value!==null&&_typeof(value)==="object"&&(value.nodeType===1||value.nodeType===9||value.nodeType===11)&&!isPlainObject(value)}function isObject(value){var type=_typeof(value);return value!=null&&(type==="object"||type==="function")}var xhtml=function xhtml(){for(var _len2=arguments.length,nodes=new Array(_len2),_key2=0;_key2<_len2;_key2++){nodes[_key2]=arguments[_key2]}return new xhtml.prototype.init(nodes)};xhtml.prototype.init=function(nodes){nodes=concat$1.apply(void 0,_toConsumableArray(nodes));this.length=0;for(var i=0;i<nodes.length;i++){if(isElement(nodes[i])){this[this.length]=nodes[i];this.length+=1}}return this};xhtml.prototype.extend=xhtml.extend=function(){var target=arguments[0]||{};var source=arguments[1]||{};var length=arguments.length;if(length===1){source=target;target=this}if(!isObject(target)){target={}}for(var key in source){try{target[key]=source[key]}catch(e){throw new Error("Illegal property value！")}}return target};xhtml.prototype.init.prototype=xhtml.prototype;var toNode=function toNode(template){var frame=document.createElement("div");frame.innerHTML=template;var childNodes=frame.childNodes;for(var i=0;i<childNodes.length;i++){if(isElement(childNodes[i])){return childNodes[i]}}return null};function toNode$1(template){if(isElement(template)){return template}else if(isString(template)){return toNode(template)}else{throw new Error("Illegal template!")}}function append(node){if(this.length>0){this[0].appendChild(toNode$1(node))}return this}function prepend(node){if(this.length>0){this[0].insertBefore(toNode$1(node),this[0].childNodes[0])}return this}function after(node){if(this.length>0){this[0].parentNode.insertBefore(toNode$1(node),this[0].nextSibling)}return this}function before(node){if(this.length>0){this[0].parentNode.insertBefore(toNode$1(node),this[0])}return this}function attr(attr,val){if(arguments.length<2){return this.length>0?this[0].getAttribute(attr):undefined}for(var i=0;i<this.length;i++){this[i].setAttribute(attr,val)}return this}function getStyle(dom,name){var allStyle=document.defaultView&&document.defaultView.getComputedStyle?document.defaultView.getComputedStyle(dom,null):dom.currentStyle;return typeof name==="string"?allStyle.getPropertyValue(name):allStyle}function css(){if(arguments.length<=1&&(arguments.length<=0||_typeof(arguments[0])!=="object")){if(this.length<=0)return;return getStyle(this[0],arguments[0])}for(var i=0;i<this.length;i++){if(arguments.length===1){for(var key in arguments[0]){this[i].style[key]=arguments[0][key]}}else this[i].style[arguments[0]]=arguments[1]}return this}function stopPropagation(event){event=event||window.event;if(event.stopPropagation){event.stopPropagation()}else{event.cancelBubble=true}}function preventDefault(event){event=event||window.event;if(event.preventDefault){event.preventDefault()}else{event.returnValue=false}}function bind(eventType,callback){if(window.attachEvent){for(var i=0;i<this.length;i++){this[i].attachEvent("on"+eventType,callback)}}else{for(var _i=0;_i<this.length;_i++){this[_i].addEventListener(eventType,callback,false)}}return this}function unbind(eventType,handler){if(window.detachEvent){for(var i=0;i<this.length;i++){this[i].detachEvent("on"+eventType,handler)}}else{for(var _i2=0;_i2<this.length;_i2++){this[_i2].removeEventListener(eventType,handler,false)}}return this}function trigger(eventType){var i,event;if(document.createEventObject){event=document.createEventObject();for(i=0;i<this.length;i++){this[i].fireEvent("on"+eventType,event)}}else{event=document.createEvent("HTMLEvents");event.initEvent(eventType,true,false);for(i=0;i<this.length;i++){this[i].dispatchEvent(event)}}return this}xhtml.prototype.extend({append:append,prepend:prepend,after:after,before:before,attr:attr,css:css,bind:bind,unbind:unbind,trigger:trigger});xhtml.extend({stopPropagation:stopPropagation,preventDefault:preventDefault});if((typeof module==="undefined"?"undefined":_typeof(module))==="object"&&_typeof(module.exports)==="object"){module.exports=xhtml}else{var _xhtml=window.xhtml;xhtml.noConflict=function(deep){window.xhtml=_xhtml;return xhtml};window.xhtml=xhtml}})();