
/*!
* xhtml.js - ü¶ë Â∏∏Áî®ÁöÑhtmlÊìç‰ΩúÈõÜÂêà„ÄÇCommon set of html operations.
* git+https://github.com/yelloxing/xhtml.js.git
*
* author ÂøÉÂè∂
*
* version 1.1.1
*
* build Sat Oct 21 2019
*
* Copyright yelloxing
* Released under the MIT license
*
* Date:Thu Nov 07 2019 16:34:34 GMT+0800 (GMT+08:00)
*/

"use strict";

function isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function _construct(Parent, args, Class) { if (isNativeReflectConstruct()) { _construct = Reflect.construct; } else { _construct = function _construct(Parent, args, Class) { var a = [null]; a.push.apply(a, args); var Constructor = Function.bind.apply(Parent, a); var instance = new Constructor(); if (Class) _setPrototypeOf(instance, Class.prototype); return instance; }; } return _construct.apply(null, arguments); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }

function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread(); }

function _nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance"); }

function _iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === "[object Arguments]") return Array.from(iter); }

function _arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } }

function _typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

(function () {
  'use strict';

  var MAX_SAFE_INTEGER = 9007199254740991;
  /**
   * Âà§Êñ≠ÊòØ‰∏çÊòØ‰∏Ä‰∏™ÂèØ‰ª•‰Ωú‰∏∫ÈïøÂ∫¶ÁöÑÊï¥Êï∞ÔºàÊØîÂ¶ÇÊï∞ÁªÑ‰∏ãÊ†áÔºâ
   *
   * @private
   * @param {any} value ÈúÄË¶ÅÂà§Êñ≠ÁöÑÂÄº
   * @returns {boolean} Â¶ÇÊûúÊòØËøîÂõûtrueÔºåÂê¶ÂàôËøîÂõûfalse
   */

  function isLength(value) {
    return typeof value == 'number' && value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;
  }
  /**
   * Âà§Êñ≠ÊòØ‰∏çÊòØ‰∏Ä‰∏™Á±ª‰ººÊï∞ÁªÑÁöÑÂØπË±°ÔºåÊòØÂê¶ÂèØ‰ª•ÈÄöËøálengthËø≠‰ª£
   *
   *
   * @private
   * @param {any} value ÈúÄË¶ÅÂà§Êñ≠ÁöÑÂÄº
   * @returns {boolean} Â¶ÇÊûúÊòØËøîÂõûtrueÔºåÂê¶ÂàôËøîÂõûfalse
   */


  function isArrayLike(value) {
    return value != null && typeof value != 'function' && isLength(value.length);
  }

  var toString = Object.prototype.toString;
  /**
   * Ëé∑Âèñ‰∏Ä‰∏™ÂÄºÁöÑÁ±ªÂûãÂ≠óÁ¨¶‰∏≤[object type]
   *
   * @private
   * @param {*} value ÈúÄË¶ÅËøîÂõûÁ±ªÂûãÁöÑÂÄº
   * @returns {string} ËøîÂõûÁ±ªÂûãÂ≠óÁ¨¶‰∏≤
   */

  function getType(value) {
    if (value == null) {
      return value === undefined ? '[object Undefined]' : '[object Null]';
    }

    return toString.call(value);
  }
  /**
   * Âà§Êñ≠‰∏Ä‰∏™ÂÄºÊòØ‰∏çÊòØString„ÄÇ
   *
   * @since V0.1.2
   * @public
   * @param {*} value ÈúÄË¶ÅÂà§Êñ≠Á±ªÂûãÁöÑÂÄº
   * @returns {boolean} Â¶ÇÊûúÊòØStringËøîÂõûtrueÔºåÂê¶ÂàôËøîÂõûfalse
   */


  function isString(value) {
    var type = _typeof(value);

    return type === 'string' || type === 'object' && value != null && !Array.isArray(value) && getType(value) === '[object String]';
  }
  /**
   * ÂíåisArrayLikeÁ±ª‰ººÔºå‰∏çËøáÁâπÂà´ÊéíÈô§‰ª•‰∏ãÁ±ªÂûãÔºö
   *  1.Â≠óÁ¨¶‰∏≤
   *
   * @private
   * @param {any} value ÈúÄË¶ÅÂà§Êñ≠ÁöÑÂÄº
   * @returns {boolean} Â¶ÇÊûúÊòØËøîÂõûtrueÔºåÂê¶ÂàôËøîÂõûfalse
   */


  function isArraySpec(value) {
    return isArrayLike(value) && !isString(value);
  }
  /**
   * ÂàõÂª∫‰∏Ä‰∏™Êñ∞Êï∞ÁªÑÔºåÊää‰º†ÈÄíÁöÑÊï∞ÁªÑÊàñÂÄºÊãºÊé•Ëµ∑Êù•„ÄÇ
   *
   * @since V0.2.2
   * @public
   * @param {*} value1 ÈúÄË¶ÅÊãºÊé•ÁöÑÂÄº1
   * @param {*} value2 ÈúÄË¶ÅÊãºÊé•ÁöÑÂÄº2
   * @param {*} value3 ÈúÄË¶ÅÊãºÊé•ÁöÑÂÄº3
   * ...
   * @returns {Array} ËøîÂõûËøûÊé•ÂêéÁöÑÊñ∞Êï∞ÁªÑ„ÄÇ
   * @example
   *
   * concat(1, [2,3])
   * // => [1, 2, 3]
   *
   * concat([], [[1, 2], 3], false, 'Â≠óÁ¨¶‰∏≤')
   * // => [1, 2, 3, false, 'Â≠óÁ¨¶‰∏≤']
   *
   * concat()
   * // => []
   */


  var concat = function concat(newArray, values) {
    for (var i = 0; i < values.length; i++) {
      if (isArraySpec(values[i])) {
        if (values[i].length > 1) {
          concat(newArray, values[i]);
        } else if (values[i].length === 1) {
          newArray.push(values[i][0]);
        }
      } else {
        newArray.push(values[i]);
      }
    }
  };

  function concat$1() {
    var newArray = [];

    for (var _len = arguments.length, values = new Array(_len), _key = 0; _key < _len; _key++) {
      values[_key] = arguments[_key];
    }

    concat(newArray, values);
    return newArray;
  }
  /**
   * Âà§Êñ≠‰∏Ä‰∏™ÂÄºÊòØ‰∏çÊòØ‰∏Ä‰∏™Êú¥Á¥†ÁöÑ'ÂØπË±°'
   *
   * @private
   * @param {*} value ÈúÄË¶ÅÂà§Êñ≠Á±ªÂûãÁöÑÂÄº
   * @returns {boolean} Â¶ÇÊûúÊòØÊú¥Á¥†ÁöÑ'ÂØπË±°'ËøîÂõûtrueÔºåÂê¶ÂàôËøîÂõûfalse
   */


  function isPlainObject(value) {
    if (value === null || _typeof(value) !== 'object' || getType(value) != '[object Object]') {
      return false;
    } // Â¶ÇÊûúÂéüÂûã‰∏∫null


    if (Object.getPrototypeOf(value) === null) {
      return true;
    }

    var proto = value;

    while (Object.getPrototypeOf(proto) !== null) {
      proto = Object.getPrototypeOf(proto);
    }

    return Object.getPrototypeOf(value) === proto;
  }
  /**
   * Âà§Êñ≠‰∏Ä‰∏™ÂÄºÊòØ‰∏çÊòØÁªìÁÇπÂÖÉÁ¥†„ÄÇ
   *
   * @since V0.1.2
   * @public
   * @param {*} value ÈúÄË¶ÅÂà§Êñ≠Á±ªÂûãÁöÑÂÄº
   * @returns {boolean} Â¶ÇÊûúÊòØÁªìÁÇπÂÖÉÁ¥†ËøîÂõûtrueÔºåÂê¶ÂàôËøîÂõûfalse
   */


  function isElement(value) {
    return value !== null && _typeof(value) === 'object' && (value.nodeType === 1 || value.nodeType === 9 || value.nodeType === 11) && !isPlainObject(value);
  }
  /**
   * Âà§Êñ≠‰∏Ä‰∏™ÂÄºÊòØ‰∏çÊòØObject„ÄÇ
   *
   * @since V0.1.2
   * @public
   * @param {*} value ÈúÄË¶ÅÂà§Êñ≠Á±ªÂûãÁöÑÂÄº
   * @returns {boolean} Â¶ÇÊûúÊòØObjectËøîÂõûtrueÔºåÂê¶ÂàôËøîÂõûfalse
   */


  function isObject(value) {
    var type = _typeof(value);

    return value != null && (type === 'object' || type === 'function');
  }

  var xhtml = function xhtml() {
    for (var _len2 = arguments.length, nodes = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {
      nodes[_key2] = arguments[_key2];
    }

    return new xhtml.prototype.init(nodes);
  };

  xhtml.prototype.init = function (nodes) {
    nodes = concat$1.apply(void 0, _toConsumableArray(nodes));
    this.length = 0;

    for (var i = 0; i < nodes.length; i++) {
      if (isElement(nodes[i])) {
        this[this.length] = nodes[i];
        this.length += 1;
      }
    }

    return this;
  }; // Êâ©Â±ïÊñπÊ≥ï
  // Âú®xhtmlÂíåxhtml.prototype‰∏äÂàÜÂà´Ë∞ÉÁî®extendÊñπÊ≥ïÂ∞±ÂèØ‰ª•Âú®Á±ªÂíåÂØπË±°‰∏äÊâ©Â±ïÊñπÊ≥ï‰∫Ü


  xhtml.prototype.extend = xhtml.extend = function () {
    var target = arguments[0] || {};
    var source = arguments[1] || {};
    var length = arguments.length;
    /*
     * Á°ÆÂÆöÂ§çÂà∂ÁõÆÊ†áÂíåÊ∫ê
     */

    if (length === 1) {
      //Â¶ÇÊûúÂè™Êúâ‰∏Ä‰∏™ÂèÇÊï∞ÔºåÁõÆÊ†áÂØπË±°ÊòØËá™Â∑±
      source = target;
      target = this;
    }

    if (!isObject(target)) {
      //Â¶ÇÊûúÁõÆÊ†á‰∏çÊòØÂØπË±°ÊàñÂáΩÊï∞ÔºåÂàôÂàùÂßãÂåñ‰∏∫Á©∫ÂØπË±°
      target = {};
    }
    /*
     * Â§çÂà∂Â±ûÊÄßÂà∞ÂØπË±°‰∏äÈù¢
     */


    for (var key in source) {
      try {
        target[key] = source[key];
      } catch (e) {
        // ‰∏∫‰ªÄ‰πàÈúÄË¶Åtry{}catch(e){}Ôºü
        // ‰∏Ä‰∫õÂØπË±°ÁöÑÁâπÊÆäÂ±ûÊÄß‰∏çÂÖÅËÆ∏Ë¶ÜÁõñÔºåÊØîÂ¶Çname
        // ÊâßË°åÔºöxhtml.extend({'name':'Êñ∞ÂêçÁß∞'})
        // ‰ºöÊäõÂá∫TypeError
        throw new Error("Illegal property valueÔºÅ");
      }
    }

    return target;
  };

  xhtml.prototype.init.prototype = xhtml.prototype; // ÊääÂ≠óÁ¨¶‰∏≤ÂèòÊàêÁªìÁÇπ

  var toNode = function toNode(template) {
    var frame = document.createElement("div");
    frame.innerHTML = template;
    var childNodes = frame.childNodes;

    for (var i = 0; i < childNodes.length; i++) {
      if (isElement(childNodes[i])) {
        return childNodes[i];
      }
    }

    return null;
  };

  function toNode$1(template) {
    if (isElement(template)) {
      return template;
    } else if (isString(template)) {
      return toNode(template);
    } else {
      throw new Error('Illegal template!');
    }
  }
  /**
   * Âà§Êñ≠‰∏Ä‰∏™ÂÄºÊòØ‰∏çÊòØFunction„ÄÇ
   *
   * @since V0.1.2
   * @public
   * @param {*} value ÈúÄË¶ÅÂà§Êñ≠Á±ªÂûãÁöÑÂÄº
   * @returns {boolean} Â¶ÇÊûúÊòØFunctionËøîÂõûtrueÔºåÂê¶ÂàôËøîÂõûfalse
   */


  function isFunction(value) {
    if (!isObject(value)) {
      return false;
    }

    var type = getType(value);
    return type === '[object Function]' || type === '[object AsyncFunction]' || type === '[object GeneratorFunction]' || type === '[object Proxy]';
  }
  /**
   * Âü∫Êú¨ÁöÑDOMÊìç‰Ωú:Â¢ûÂà†ÊîπÊü•
   */

  /*Ê∑ªÂä†ÁªìÁÇπ*/
  // Âú®Ë¢´ÈÄâÂÖÉÁ¥†ÂÜÖÈÉ®ÁöÑÁªìÂ∞æÊèíÂÖ•ÂÜÖÂÆπ


  function append(node) {
    if (this.length > 0) {
      this[0].appendChild(toNode$1(node));
    }

    return this;
  } // Âú®Ë¢´ÈÄâÂÖÉÁ¥†ÂÜÖÈÉ®ÁöÑÂºÄÂ§¥ÊèíÂÖ•ÂÜÖÂÆπ


  function prepend(node) {
    if (this.length > 0) {
      this[0].insertBefore(toNode$1(node), this[0].childNodes[0]);
    }

    return this;
  } // Âú®Ë¢´ÈÄâÂÖÉÁ¥†‰πãÂêéÊèíÂÖ•ÂÜÖÂÆπ


  function after(node) {
    if (this.length > 0) {
      this[0].parentNode.insertBefore(toNode$1(node), this[0].nextSibling);
    }

    return this;
  } // Âú®Ë¢´ÈÄâÂÖÉÁ¥†‰πãÂâçÊèíÂÖ•ÂÜÖÂÆπ


  function before(node) {
    if (this.length > 0) {
      this[0].parentNode.insertBefore(toNode$1(node), this[0]);
    }

    return this;
  }
  /*Êü•ÊâæÁªìÁÇπ*/
  // ÂØªÊâæÂêé‰ª£ÁªìÁÇπ


  function find(tagName, checkback) {
    if (isFunction(tagName) || arguments.length < 1) {
      checkback = tagName;
      tagName = "*";
    }

    var nodes = this[0].getElementsByTagName(tagName); // Â¶ÇÊûúÊ≤°Êúâ‰º†ÈÄíÁ≠õÈÄâÂáΩÊï∞ÔºåÂÖ®ÈÉ®ÈÄöËøá

    if (!isFunction(checkback)) {
      return this["new"](nodes);
    }

    var xhtmlObj = this["new"]();

    for (var i = 0; i < nodes.length; i++) {
      if (checkback(nodes[i])) {
        xhtmlObj[xhtmlObj.length++] = nodes[i];
      }
    }

    return xhtmlObj;
  } // ÂØªÊâæÁ•ñÂÆóÁªìÁÇπ


  function parents(checkback, stopback) {
    var nodes = [],
        node = this[0].parentNode; // Â¶ÇÊûúÂΩìÂâçÈù¢ÂØπÁöÑÊòØÁªìÁÇπÔºåÁªßÁª≠

    while (isElement(node)) {
      // Ê£ÄÊµãÊòØÂê¶ÂêàÊ†º
      if (!isFunction(checkback) || checkback(node)) {
        nodes.push(node);
      } // Âà§Êñ≠ÊòØÂê¶ÈúÄË¶ÅÁªßÁª≠Âêë‰∏äÊü•Êâæ


      if (isFunction(stopback) && stopback(node)) {
        break;
      }

      node = node.parentNode;
    }

    return this["new"](nodes);
  } // ÂØªÊâæÂ≠©Â≠êÁªìÁÇπ


  function children(checkback) {
    var nodes = this[0].childNodes,
        xhtmlObj = this["new"]();

    for (var i = 0; i < nodes.length; i++) {
      if (isElement(nodes[i]) && (!isFunction(checkback) || checkback(nodes[i]))) {
        xhtmlObj[xhtmlObj.length++] = nodes[i];
      }
    }

    return xhtmlObj;
  } // Ëé∑ÂèñÂΩìÂâçÊåáÂÆöÂ∫èÂè∑ÁöÑÁªìÁÇπ


  function eq(index) {
    var xhtmlObj = this["new"](); // Â¶ÇÊûúÁü•ÈÅìÁöÑÂ∫èÂè∑Â≠òÂú®

    if (this.length > index) {
      xhtmlObj[0] = this[index];
      xhtmlObj.length = 1;
    }

    return xhtmlObj;
  }
  /*Âà†Èô§ÁªìÁÇπ*/
  // Âà†Èô§ÂΩìÂâçÁªìÁÇπ


  function remove() {
    for (var i = 0; i < this.length; i++) {
      this[i].parentNode.removeChild(this[i]);
    }

    return this;
  }

  var classHelper = {
    // targetClass‰∏≠ÊòØÂê¶ÂåÖÂê´checkClass
    // Á©∫Ê†ºÂàÜÂâ≤
    "has": function has(targetClass, checkClass) {
      targetClass = " " + targetClass + " ";
      checkClass = " " + checkClass.trim() + " ";
      return targetClass.indexOf(checkClass) > -1;
    },
    "delete": function _delete(targetClass, checkClass) {
      targetClass = " " + targetClass + " ";
      checkClass = " " + checkClass.trim() + " ";

      while (targetClass.indexOf(checkClass) > -1) {
        targetClass = targetClass.replace(checkClass, " ");
      } // ÊúÄÂêéË∞ÉÊï¥‰∏Ä‰∏ã


      return targetClass.trim().replace(/ +/g, " ");
    }
  };
  /**
   * Â±ûÊÄßÊìç‰Ωú
   */

  function attr(attr, val) {
    if (arguments.length < 2) {
      return this.length > 0 ? this[0].getAttribute(attr) : undefined;
    }

    for (var i = 0; i < this.length; i++) {
      this[i].setAttribute(attr, val);
    }

    return this;
  }
  /**
   * ÁâπÊÆäÂ±ûÊÄß
   * ---------------
   * class
   */
  // Âà§Êñ≠ÊòØÂê¶Êúâ


  function hasClass(clazz) {
    var oldClazz = this[0].getAttribute('class');
    return classHelper.has(oldClazz, clazz);
  } // Âà†Èô§


  function removeClass(clazz) {
    var oldClazz = this[0].getAttribute('class'); // Âà†Èô§

    var newClazz = classHelper["delete"](oldClazz, clazz);
    this[0].setAttribute('class', newClazz);
    return this;
  } // Ê∑ªÂä†


  function addClass(clazz) {
    var oldClazz = this[0].getAttribute('class');

    if (!classHelper.has(oldClazz, clazz)) {
      this[0].setAttribute('class', oldClazz + " " + clazz);
    }

    return this;
  } // Ê∑ªÂä†ÊàñÂà†Èô§


  function toggerClass(clazz) {
    var oldClazz = this[0].getAttribute('class'); // ÊúâÂ∞±Âà†Èô§

    if (classHelper.has(oldClazz, clazz)) {
      var newClazz = classHelper["delete"](oldClazz, clazz);
      this[0].setAttribute('class', newClazz);
    } // Ê≤°ÊúâÂ∞±Ê∑ªÂä†
    else {
        this[0].setAttribute('class', oldClazz + " " + clazz);
      }

    return this;
  }
  /**
   * ËøîÂõûÊ∏≤ÊüìÂêéÁöÑCSSÊ†∑ÂºèÂÄº
   * @param {DOM} dom ÁõÆÊ†áÁªìÁÇπ
   * @param {String} name Â±ûÊÄßÂêçÁß∞ÔºàÂèØÈÄâÔºâ
   * @return {String}
   */


  function getStyle(dom, name) {
    // Ëé∑ÂèñÁªìÁÇπÁöÑÂÖ®ÈÉ®Ê†∑Âºè
    var allStyle = document.defaultView && document.defaultView.getComputedStyle ? document.defaultView.getComputedStyle(dom, null) : dom.currentStyle; // Â¶ÇÊûúÊ≤°ÊúâÊåáÂÆöÂ±ûÊÄßÂêçÁß∞ÔºåËøîÂõûÂÖ®ÈÉ®Ê†∑Âºè

    return typeof name === 'string' ? allStyle.getPropertyValue(name) : allStyle;
  }
  /**
   * Ê†∑ÂºèÊìç‰Ωú
   * @arguments(key):Ëé∑ÂèñÊåáÂÆöÊ†∑Âºè
   * @arguments(key,value):ËÆæÁΩÆÊåáÂÆöÊ†∑Âºè
   * @arguments():Ëé∑ÂèñÂÖ®ÈÉ®Ê†∑Âºè
   * @arguments(json):ËÆæÁΩÆÂ§ßÈáèÊ†∑Âºè
   */


  function css() {
    // Ëé∑ÂèñÊ†∑Âºè
    if (arguments.length <= 1 && (arguments.length <= 0 || _typeof(arguments[0]) !== 'object')) {
      if (this.length <= 0) return; // ‰∏∫‰∫ÜËé∑ÂèñÈùûstyleÂÆö‰πâÁöÑÊ†∑ÂºèÔºåÈúÄË¶Å‰ΩøÁî®ÁâπÊÆäÁöÑÊñπÊ≥ïËé∑Âèñ

      return getStyle(this[0], arguments[0]);
    } // ËÆæÁΩÆÊ†∑Âºè


    for (var i = 0; i < this.length; i++) {
      if (arguments.length === 1) {
        for (var key in arguments[0]) {
          this[i].style[key] = arguments[0][key];
        }
      } else this[i].style[arguments[0]] = arguments[1];
    }

    return this;
  }
  /**
   * ‰∫ã‰ª∂Êìç‰Ωú
   */
  // ÈòªÊ≠¢ÂÜíÊ≥°


  function stopPropagation(event) {
    event = event || window.event;

    if (event.stopPropagation) {
      //ËøôÊòØÂÖ∂‰ªñÈùûIEÊµèËßàÂô®
      event.stopPropagation();
    } else {
      event.cancelBubble = true;
    }
  } // ÈòªÊ≠¢ÈªòËÆ§‰∫ã‰ª∂


  function preventDefault(event) {
    event = event || window.event;

    if (event.preventDefault) {
      event.preventDefault();
    } else {
      event.returnValue = false;
    }
  } // ÁªëÂÆö‰∫ã‰ª∂


  function bind(eventType, callback) {
    if (window.attachEvent) {
      for (var i = 0; i < this.length; i++) {
        this[i].attachEvent("on" + eventType, callback);
      } // ÂêéÁªëÂÆöÁöÑÂÖàÊâßË°å

    } else {
      for (var _i = 0; _i < this.length; _i++) {
        this[_i].addEventListener(eventType, callback, false);
      } // ÊçïËé∑

    }

    return this;
  } // Ëß£Èô§ÁªëÂÆö


  function unbind(eventType, handler) {
    if (window.detachEvent) {
      for (var i = 0; i < this.length; i++) {
        this[i].detachEvent("on" + eventType, handler);
      }
    } else {
      for (var _i2 = 0; _i2 < this.length; _i2++) {
        this[_i2].removeEventListener(eventType, handler, false);
      } // ÊçïËé∑

    }

    return this;
  } // Ëß¶Âèë‰∫ã‰ª∂


  function trigger(eventType) {
    var i, event; //ÂàõÂª∫eventÁöÑÂØπË±°ÂÆû‰æã„ÄÇ

    if (document.createEventObject) {
      // IEÊµèËßàÂô®ÊîØÊåÅfireEventÊñπÊ≥ï
      event = document.createEventObject();

      for (i = 0; i < this.length; i++) {
        this[i].fireEvent('on' + eventType, event);
      }
    } // ÂÖ∂‰ªñÊ†áÂáÜÊµèËßàÂô®‰ΩøÁî®dispatchEventÊñπÊ≥ï
    else {
        event = document.createEvent('HTMLEvents'); // 3‰∏™ÂèÇÊï∞Ôºö‰∫ã‰ª∂Á±ªÂûãÔºåÊòØÂê¶ÂÜíÊ≥°ÔºåÊòØÂê¶ÈòªÊ≠¢ÊµèËßàÂô®ÁöÑÈªòËÆ§Ë°å‰∏∫

        event.initEvent(eventType, true, false);

        for (i = 0; i < this.length; i++) {
          this[i].dispatchEvent(event);
        }
      }

    return this;
  } // Ëé∑ÂèñÂÖÉÁ¥†Â§ßÂ∞è


  function size(type) {
    var dom = this[0],
        elemHeight,
        elemWidth;

    if (type == 'content') {
      //ÂÜÖÂÆπ
      elemWidth = dom.clientWidth - (getStyle(dom, 'padding-left') + "").replace('px', '') - (getStyle(dom, 'padding-right') + "").replace('px', '');
      elemHeight = dom.clientHeight - (getStyle(dom, 'padding-top') + "").replace('px', '') - (getStyle(dom, 'padding-bottom') + "").replace('px', '');
    } else if (type == 'padding') {
      //ÂÜÖÂÆπ+ÂÜÖËæπË∑ù
      elemWidth = dom.clientWidth;
      elemHeight = dom.clientHeight;
    } else if (type == 'border') {
      //ÂÜÖÂÆπ+ÂÜÖËæπË∑ù+ËæπÊ°Ü
      elemWidth = dom.offsetWidth;
      elemHeight = dom.offsetHeight;
    } else if (type == 'scroll') {
      //ÊªöÂä®ÁöÑÂÆΩÔºà‰∏çÂåÖÊã¨borderÔºâ
      elemWidth = dom.scrollWidth;
      elemHeight = dom.scrollHeight;
    } else {
      elemWidth = dom.offsetWidth;
      elemHeight = dom.offsetHeight;
    }

    return {
      width: elemWidth,
      height: elemHeight
    };
  } // Ëé∑ÂèñÈº†Ê†áÁõ∏ÂØπÂÖÉÁ¥†‰ΩçÁΩÆ


  function mousePosition(event) {
    // È¶ñÂÖàËé∑ÂèñÂÖÉÁ¥†ÁöÑ‰ΩçÁΩÆ
    // top„ÄÅright„ÄÅbottomÂíåleft
    var bounding = this[0].getBoundingClientRect();
    if (!event || !event.clientX) throw new Error('Event is necessary!');
    return {
      // Áõ∏ÂáèËé∑ÂæóÂ∑ÆÂÄº
      "x": event.clientX - bounding.left,
      "y": event.clientY - bounding.top
    };
  } // Ëé∑ÂèñÂÖÉÁ¥†‰ΩçÁΩÆ


  function offsetPosition() {
    var left = 0,
        top = 0,
        dom = this[0];
    top = dom.offsetTop;
    left = dom.offsetLeft;
    dom = dom.offsetParent;

    while (dom) {
      top += dom.offsetTop;
      left += dom.offsetLeft;
      dom = dom.offsetParent;
    }

    return {
      "left": left,
      "top": top
    };
  }

  xhtml.prototype.extend({
    // ËøΩÂä†ÁªìÁÇπ
    append: append,
    prepend: prepend,
    after: after,
    before: before,
    // Êü•ÊâæÁªìÁÇπ
    find: find,
    parents: parents,
    children: children,
    eq: eq,
    // Âà†Èô§ÁªìÁÇπ
    remove: remove,
    // Â±ûÊÄßÂíåÊ†∑Âºè
    attr: attr,
    css: css,
    // class
    hasClass: hasClass,
    addClass: addClass,
    removeClass: removeClass,
    toggerClass: toggerClass,
    // DOM‰∫ã‰ª∂
    bind: bind,
    unbind: unbind,
    trigger: trigger,
    // ÂÖÉÁ¥†Â§ßÂ∞è
    size: size,
    // ‰ΩçÁΩÆ
    mousePosition: mousePosition,
    offsetPosition: offsetPosition
  });
  xhtml.extend({
    // DOM‰∫ã‰ª∂
    stopPropagation: stopPropagation,
    preventDefault: preventDefault
  }); // Áî®‰∫éÂÜÖÈÉ®Âª∫Á´ãÂØπË±°ÊñπÊ≥ï

  xhtml.prototype["new"] = function () {
    for (var _len3 = arguments.length, nodes = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {
      nodes[_key3] = arguments[_key3];
    }

    return _construct(xhtml, nodes);
  }; // Âà§Êñ≠ÂΩìÂâçÁéØÂ¢ÉÔºåÂ¶ÇÊûú‰∏çÊòØÊµèËßàÂô®ÁéØÂ¢É


  if ((typeof module === "undefined" ? "undefined" : _typeof(module)) === "object" && _typeof(module.exports) === "object") {
    module.exports = xhtml;
  } // ÊµèËßàÂô®ÁéØÂ¢É‰∏ã
  // Âõ†‰∏∫ÊµèËßàÂô®‰∏ãÊåÇËΩΩÂà∞windowÂØπË±°‰∏ä
  // ‰∏∫‰∫ÜÈò≤Ê≠¢Ë¶ÜÁõñÔºåÈ¢ùÂ§ñÊèê‰æõ‰∏Ä‰∏™noConflictÊñπÊ≥ïÔºåÁî®‰ª•Âú®Ë¶ÜÁõñÁöÑÊó∂ÂÄôÊÅ¢Â§ç
  else {
      var // ‰øùÂ≠ò‰πãÂâçÁöÑxhtmlÔºåÈò≤Ê≠¢Áõ¥Êé•Ë¶ÜÁõñ
      _xhtml = window.xhtml;

      xhtml.noConflict = function (deep) {
        // Â¶ÇÊûúÂΩìÂâçÁöÑxhtmlÊòØË¢´ÊúÄÊñ∞ÁöÑxhtmlË¶ÜÁõñÁöÑ
        // ÊÅ¢Â§ç‰πãÂâçÁöÑ
        window.xhtml = _xhtml; // ËøîÂõûÂΩìÂâçxhtml
        // Âõ†‰∏∫Ë∞ÉÁî®Ëøô‰∏™ÊñπÊ≥ï‰ª•Âêé
        // ÂÖ®Â±Äwindow‰∏ãÁöÑxhtmlÊòØ‰ªÄ‰πà
        // Â∑≤Áªè‰∏ç‰∏ÄÂÆö‰∫Ü

        return xhtml;
      }; // ÊåÇËΩΩÂ∫ìÂØπË±°Âà∞Ê†π


      window.xhtml = xhtml;
    }
})();
